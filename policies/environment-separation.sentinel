
# Environment Separation Policy
# Ensures that production changes are not applied in non-production environments.

policy "environment-separation" {
  import "tfplan/v2" as tfplan

  main = rule {
    all tfplan.resource_changes as resource {
      resource.mode is "managed" and
      resource.change.after.tags.Environment != "production"
    }
  }
}
